<Metadata
  title='Getting Started: Loader'
  description='Learn how to use Loaders in a new Firebolt app.'
/>

# Loaders

Loaders let you fetch data securely from a database (or anywhere else) using the [useLoader](/docs/ref/useLoader) hook:

```jsx title='components/City.js' lineNumbers
import { useLoader } from 'firebolt'

export function City({ id }) {
  const loader = useLoader(getCity, id)
  const city = loader.read()
  return (
    <div>
      <h1>{city.name}</h1>
      <p>{city.description}</p>
    </div>
  )
}

export async function getCity(req, id) {
  return req.db('cities').where({ id }).first()
}
```

Loaders can be placed in any page or component and work seamlessly with server side rendering and on the client.

## Loader Functions

Loader functions are provided a [Request](/docs/ref/request) object that provides access to cookies, setting data expiration and performing redirects.

You can decorate Request objects with access to your database or anything else you might need, in your [firebolt.config.js](/docs/ref/config) file.

## Suspense & Error Boundaries

Calling `loader.read()` throws a promise to Suspense boundaries for loading UI while data is being fetched.

If your Loader fails you can catch it with an `<ErrorBoundary>` to display an error message.

```jsx title='pages/cities_$cityId.js' lineNumbers
import { Suspense } from 'react'
import { ErrorBoundary, useLocation } from 'firebolt'

import { City } from '../components/City'

export function CityPage() {
  const { cityId } = useLocation().params
  return (
    <ErrorBoundary fallback={<div>Error</div>}>
      <Suspense fallback={<div>Loading...</div>}>
        <City id={cityId} />
      </Suspense>
    </ErrorBoundary>
  )
}
```

Loaders work with Suspense with the way React intended, and you can use them anywhere in your app hierarchy.
