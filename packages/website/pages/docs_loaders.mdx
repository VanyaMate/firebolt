<Metadata
  title='Getting Started: Loader'
  description='Learn how to use Loaders in a new Firebolt app.'
/>

# Loaders

Loaders let you fetch data securely from a database (or anywhere else) using the [useLoader](/docs/ref/useLoader) hook:

```jsx title='components/City.js' lineNumbers
import { useLoader } from 'firebolt'

export function City({ id }) {
  const loader = useLoader(getCity, id)
  const city = loader.read()
  return (
    <div>
      <h1>{city.name}</h1>
      <p>{city.description}</p>
    </div>
  )
}

export async function getCity(req, id) {
  return await req.db('cities').where({ id }).first()
}
```

Loaders simplify the way you build apps:

- Interact directly with a database or server resource right inside any component, anywhere in your app
- Seamlessly works during SSR and on the client
- 100% compatible with Suspense and [ErrorBoundary](/docs/ref/error-boundary)
- Code only ever exists on the server and is removed from client bundles
- You can forget about writing API endpoints completely (unless you [need them](/docs/ref/api-js))

## Request Object

Loader functions are provided a [Request](/docs/ref/request) object that provides access to cookies, setting data expiration and performing redirects.

You can decorate Request objects with access to your database or anything else you might need, in your [firebolt.config.js](/docs/ref/config) file.

## Suspense & Error Boundaries

Calling `loader.read()` throws a promise to Suspense boundaries for loading UI while data is being fetched.

If your Loader fails you can catch it with an `<ErrorBoundary>` to display an error message.

```jsx title='pages/cities_$id.js' lineNumbers
import { Suspense } from 'react'
import { ErrorBoundary, useLocation } from 'firebolt'

import { City } from '../components/City'

export function CityPage() {
  const { id } = useLocation().params
  return (
    <ErrorBoundary fallback={<div>Error</div>}>
      <Suspense fallback={<div>Loading...</div>}>
        <City id={id} />
      </Suspense>
    </ErrorBoundary>
  )
}
```
